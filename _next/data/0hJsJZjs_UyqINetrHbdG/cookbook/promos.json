{"pageProps":{"frontmatter":{"name":"promos-form","title":"Create Promotion (Complex Form)","category":"Form/Creation Screens","path":"/cookbook/promos","tags":["wide"]},"code":"var Component=(()=>{var Z=Object.create;var g=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var J=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var x=a=>g(a,\"__esModule\",{value:!0});var K=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),Q=(a,t)=>{x(a);for(var s in t)g(a,s,{get:t[s],enumerable:!0})},ee=(a,t,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let d of J(t))!G.call(a,d)&&d!==\"default\"&&g(a,d,{get:()=>t[d],enumerable:!(s=$(t,d))||s.enumerable});return a},te=a=>ee(x(g(a!=null?Z(X(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var O=K((se,F)=>{F.exports=_jsx_runtime});var le={};Q(le,{default:()=>ne,frontmatter:()=>ae});var e=te(O()),ae={name:\"promos-form\",title:\"Create Promotion (Complex Form)\",category:\"Form/Creation Screens\",path:\"/cookbook/promos\",tags:[\"wide\"]};function oe(a){let t=Object.assign({h2:\"h2\",p:\"p\",a:\"a\",h3:\"h3\",code:\"code\",ul:\"ul\",li:\"li\",hr:\"hr\"},a.components),{CodeDemo:s,Preview:d,EzAppLayout:T,EzNavigation:L,EzPageHeader:R,EzPage:q,EzBanner:V,EzCard:D,EzCardSection:c,EzFormLayout:v,EzLayout:m,EzField:l,EzSegmentedControl:M,EzCheckbox:j,EzButton:y,wrapper:z}=t,k=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.h2,{id:\"new-promotion-example\",children:\"New promotion example\"}),`\n`,(0,e.jsxs)(t.p,{children:[\"The new promotion form demonstrates a more complex layout for form content than the simpler \",(0,e.jsx)(t.a,{href:\"/cookbook/lead-form\",children:\"lead form\"}),\", and also demonstrates a wider variety of form inputs: text inputs, date inputs, segmented controls, radio buttons and an acknowledgement checkbox.\"]}),`\n`,(0,e.jsx)(t.h3,{id:\"validation\",children:\"Validation\"}),`\n`,(0,e.jsxs)(t.p,{children:[\"This form uses the \",(0,e.jsx)(t.a,{href:\"/components/ez-field#field-with-validation-error\",children:\"Field validation API\"}),\" to prompt the user to fill out required fields and to ensure that values entered are within the expected range. The validation logic applied in this example has been intentionally kept simple to demonstrate the concepts.\"]}),`\n`,(0,e.jsxs)(t.p,{children:[\"Each field that requires validation accepts a \",(0,e.jsx)(t.code,{children:\"touched\"}),\" prop and an \",(0,e.jsx)(t.code,{children:\"error\"}),\" prop. These properties are used to determine whether or not to show an error and helps to avoid overwhelming users with error messages for fields they have not interacted with.\"]}),`\n`,(0,e.jsxs)(t.ul,{children:[`\n`,(0,e.jsxs)(t.li,{children:[\"The \",(0,e.jsx)(t.code,{children:\"error\"}),\" provides a validation message to display to the user. The presence of a value indicates that the field is currently in an invalid state.\"]}),`\n`,(0,e.jsxs)(t.li,{children:[\"The \",(0,e.jsx)(t.code,{children:\"touched\"}),\" indicates that the user has interacted with or has visited the field. This let's us know that we're ready to display the validation outcome.\"]}),`\n`]}),`\n`,(0,e.jsxs)(t.p,{children:[\"The code sample below demonstrates some example react hooks to maintain \",(0,e.jsx)(t.code,{children:\"error\"}),\" and \",(0,e.jsx)(t.code,{children:\"touched\"}),\" values for each field. In a real application, these functions would likely live in a separate module/package from the page. For example, both the \",(0,e.jsx)(t.a,{href:\"https://jaredpalmer.com/formik/\",children:\"Formik\"}),\" and \",(0,e.jsx)(t.a,{href:\"https://final-form.org/react\",children:\"Final Form\"}),\" libraries have similar React hooks for helping maintain the form state.\"]}),`\n`,(0,e.jsx)(t.h3,{id:\"composite-component-layouts\",children:\"Composite component layouts\"}),`\n`,(0,e.jsx)(t.p,{children:'One detail to note is the use of nested layouts to organize the form content presenting the \"Promotion value\" inputs. Logically the page is presenting two controls under the label \"Promotion Value\". Semantically, the example code is presenting two separate components and visually hiding the label of one of them. While this does make the form submission simpler by exposing two separate values in the submitted result, there may be accessibility implications since the visible label only relates to one of the two inputs.'}),`\n`,(0,e.jsxs)(t.p,{children:[\"An alternative approach (not explored here) might instead use a \",(0,e.jsx)(t.a,{href:\"/components/ez-field#custom-input-field\",children:\"custom input field\"}),\" to present both the text field and the segmented control under a single field label.\"]}),`\n`,(0,e.jsx)(s,{code:`() => {\n  const onClick = e => e.preventDefault();\n\n  // NOTE: This code is provided inline to demonstrate what is possible with the EzField validation API.\n  // A React-hook like this would typically live in a separate module/package\n  const useForm = () => {\n    const values = React.useRef({});\n    const [isSubmitting, setSubmitting] = React.useState(false);\n\n    return {\n      values: values.current,\n      setFieldValue: (name, value) => {\n        values.current[name] = value;\n      },\n      isSubmitting,\n      setSubmitting,\n    };\n  };\n\n  const {values, setFieldValue, isSubmitting, setSubmitting} = useForm();\n\n  // NOTE: This code is provided inline to demonstrate what is possible with the EzField validation API.\n  // A React-hook like this would typically live in a separate module/package\n  const useField = nameOrOptions => {\n    const options = typeof nameOrOptions === 'string' ? {name: nameOrOptions} : nameOrOptions;\n    const {name, type} = options;\n    const [value, setValue] = React.useState(options.initialValue);\n    const [touched, setTouched] = React.useState(options.initialTouched || false);\n    const fieldValue = type === 'radio' || type === 'checkbox' ? {checked: value} : {value};\n    const validate = options.validate || (() => false);\n\n    return {\n      onChange: eventOrValue => {\n        const target =\n          eventOrValue && eventOrValue.target ? eventOrValue.target : {value: eventOrValue};\n        setFieldValue(name, target.value);\n        setValue(target.value);\n      },\n      onBlur: () => setTouched(true),\n      name,\n      touched: isSubmitting ? true : touched,\n      error: validate(value),\n    };\n  };\n\n  // these validation rules can be reused across multiple fields\n  const required = value => (value ? undefined : 'Required');\n  const isEmpty = value => value === null || value === undefined || value === '';\n  const greaterThanZero = value =>\n    !isEmpty(value) && value <= 0 ? 'Must be greater than zero' : false;\n  const numeric = value => (!isEmpty(value) && isNaN(value) ? 'Must be a numeric value' : false);\n\n  // helper function to combine validation rules\n  const rules = (...rules) => value => rules.reduce((res, rule) => res || rule(value), false);\n\n  return (\n    <EzAppLayout layout=\"centered\">\n      <EzNavigation\n        home={{href: '#', label: 'Homepage', logo: {src: ezCaterLogoPath, width: 100}}}\n        links={[\n          {href: '#', label: 'Orders', onClick},\n          {href: '#', label: 'Club Soda', onClick},\n          {href: '#', label: 'Dashboard', onClick},\n          {href: '#', label: 'Payments', onClick},\n          {href: '#', label: 'Rankings', onClick},\n          {href: '#', label: 'Customer Management', onClick},\n          {href: '#', label: 'Performance', onClick},\n          {href: '#', label: 'Reports', onClick},\n          {href: '#', label: 'Reviews', onClick},\n          {href: '#', label: 'Settings', onClick},\n        ]}\n        utilityLinks={[\n          {href: '#', onClick, label: 'Chat'},\n          {href: '#', onClick, label: '24/7 Support'},\n        ]}\n        userMenu={{\n          links: [\n            {href: '#', onClick, label: 'Settings'},\n            {href: '#', onClick, label: 'Sign out'},\n          ],\n          name: 'Stefania Mallett',\n        }}\n      >\n        <EzPageHeader\n          title=\"Create New Promo\"\n          breadcrumb={{label: 'Back to Promotions', onClick}}\n        />\n        <EzPage>\n          <EzBanner\n            title=\"Welcome to ezOrdering Promotions\"\n            message=\"Create a promotion and share the code with your leads and customers. The promotion can be redeemed on orders placed through your ezOrdering page.\"\n            link={{\n              label: 'Learn more',\n              href: '#',\n              onClick,\n            }}\n            use=\"marketing\"\n            onDismiss={() => {}}\n          />\n          <EzCard\n            title=\"Promo Overview\"\n            subtitle=\"Promos are self-funded and are available for use within both ezOrdering and Direct Entry.\"\n          >\n            <EzCardSection>\n              <EzFormLayout>\n                <EzLayout layout=\"equal\" alignY=\"top\">\n                  <EzField\n                    type=\"text\"\n                    label=\"Promo Name\"\n                    helperText=\"The name appears in ezManage and on customer receipts\"\n                    {...useField({name: 'promo-name', validate: required})}\n                  />\n                  <EzField\n                    type=\"text\"\n                    label=\"Unique Promotion Code\"\n                    helperText=\"The your customers will use to redeem the promotion\"\n                    maxLength={15}\n                    {...useField({name: 'unique-promo-code', validate: required})}\n                  />\n                </EzLayout>\n                <EzLayout layout=\"equal\">\n                  <EzLayout layout=\"equal\" alignY=\"bottom\">\n                    <EzField\n                      type=\"text\"\n                      label=\"Promotion Value\"\n                      placeholder=\"0\"\n                      {...useField({\n                        name: 'promo-value',\n                        validate: rules(required, numeric, greaterThanZero),\n                      })}\n                    />\n                    <EzSegmentedControl\n                      name=\"promo-value-unit\"\n                      label=\"Promotion value: unit\"\n                      labelPosition=\"hidden\"\n                      options={[\n                        {label: '%', value: 'percentage'},\n                        {label: '$', value: 'dollar'},\n                      ]}\n                      active=\"percentage\"\n                    />\n                  </EzLayout>\n                  <EzField\n                    type=\"text\"\n                    label=\"Minimum Order Value (optional)\"\n                    placeholder=\"$\"\n                    {...useField({\n                      name: 'min-order-value',\n                      validate: rules(numeric, greaterThanZero),\n                    })}\n                  />\n                </EzLayout>\n              </EzFormLayout>\n            </EzCardSection>\n            <EzCardSection\n              title=\"Promo Schedule\"\n              subtitle={\\`Promotions become active upon creation. Best practice for distribution and tracking is 12 weeks or less.\\`}\n            >\n              <EzFormLayout>\n                <EzLayout layout=\"equal\">\n                  <EzField\n                    type=\"date\"\n                    label=\"End Date\"\n                    placeholder=\"Choose\"\n                    style={{width: '100%'}}\n                    {...useField({name: 'end-date', validate: required})}\n                  />\n                  <EzField\n                    type=\"radio\"\n                    bordered\n                    label=\"Eligible Days of the Week\"\n                    options={[\n                      {label: 'Weekdays only', value: 'weekdays'},\n                      {label: 'All days of the week', value: 'all'},\n                    ]}\n                    {...useField({name: 'eligible-days', type: 'radio'})}\n                  />\n                </EzLayout>\n              </EzFormLayout>\n            </EzCardSection>\n            <EzCardSection title=\"Customer Details\">\n              <EzField\n                type=\"radio\"\n                bordered\n                label=\"Redemptions per Customer\"\n                options={[\n                  {label: 'One per customer', value: 'once'},\n                  {label: 'Unlimited', value: 'unlimited'},\n                ]}\n                {...useField({name: 'redemptions', type: 'radio'})}\n              />\n            </EzCardSection>\n            <EzCardSection title=\"Store Details\">\n              <EzField\n                type=\"radio\"\n                bordered\n                label=\"Participating Stores\"\n                options={[\n                  {label: 'All stores', value: 'all'},\n                  {label: 'Specific stores', value: 'specific'},\n                ]}\n                {...useField({name: 'participating-stores', type: 'radio'})}\n              />\n            </EzCardSection>\n            <EzCardSection>\n              <EzCheckbox\n                acknowledgement\n                label=\"I agree to fund this promotion\"\n                terms=\"I understand that the value of the promotion will be removed from my payment runs from ezCater wherever the promotion has been applied. I am aware that I am responsible for funding and marketing promotion, and that I can cancel this promotion at any time. I understand that this promotion cannot be redeemed by customers on ezCater Marketplace.\"\n              />\n            </EzCardSection>\n            <EzCardSection>\n              <EzLayout layout=\"basic\">\n                <EzButton\n                  use=\"primary\"\n                  onClick={() => {\n                    setSubmitting(true);\n                    alert(JSON.stringify(values, null, 2));\n                  }}\n                >\n                  Finalize Promotion\n                </EzButton>\n                <EzButton use=\"secondary\" onClick={() => window.location.reload()}>\n                  Cancel\n                </EzButton>\n              </EzLayout>\n            </EzCardSection>\n          </EzCard>\n        </EzPage>\n      </EzNavigation>\n    </EzAppLayout>\n  );\n};`,language:\"jsx\",children:(0,e.jsx)(d,{children:()=>{let n=o=>o.preventDefault(),I=()=>{let o=React.useRef({}),[r,u]=React.useState(!1);return{values:o.current,setFieldValue:(h,p)=>{o.current[h]=p},isSubmitting:r,setSubmitting:u}},{values:N,setFieldValue:B,isSubmitting:A,setSubmitting:W}=I(),i=o=>{let r=typeof o==\"string\"?{name:o}:o,{name:u,type:h}=r,[p,_]=React.useState(r.initialValue),[H,U]=React.useState(r.initialTouched||!1),ie=h===\"radio\"||h===\"checkbox\"?{checked:p}:{value:p},Y=r.validate||(()=>!1);return{onChange:f=>{let P=f&&f.target?f.target:{value:f};B(u,P.value),_(P.value)},onBlur:()=>U(!0),name:u,touched:A?!0:H,error:Y(p)}},b=o=>o?void 0:\"Required\",C=o=>o==null||o===\"\",E=o=>!C(o)&&o<=0?\"Must be greater than zero\":!1,w=o=>!C(o)&&isNaN(o)?\"Must be a numeric value\":!1,S=(...o)=>r=>o.reduce((u,h)=>u||h(r),!1);return(0,e.jsx)(T,{layout:\"centered\",children:(0,e.jsxs)(L,{home:{href:\"#\",label:\"Homepage\",logo:{src:ezCaterLogoPath,width:100}},links:[{href:\"#\",label:\"Orders\",onClick:n},{href:\"#\",label:\"Club Soda\",onClick:n},{href:\"#\",label:\"Dashboard\",onClick:n},{href:\"#\",label:\"Payments\",onClick:n},{href:\"#\",label:\"Rankings\",onClick:n},{href:\"#\",label:\"Customer Management\",onClick:n},{href:\"#\",label:\"Performance\",onClick:n},{href:\"#\",label:\"Reports\",onClick:n},{href:\"#\",label:\"Reviews\",onClick:n},{href:\"#\",label:\"Settings\",onClick:n}],utilityLinks:[{href:\"#\",onClick:n,label:\"Chat\"},{href:\"#\",onClick:n,label:\"24/7 Support\"}],userMenu:{links:[{href:\"#\",onClick:n,label:\"Settings\"},{href:\"#\",onClick:n,label:\"Sign out\"}],name:\"Stefania Mallett\"},children:[(0,e.jsx)(R,{title:\"Create New Promo\",breadcrumb:{label:\"Back to Promotions\",onClick:n}}),(0,e.jsxs)(q,{children:[(0,e.jsx)(V,{title:\"Welcome to ezOrdering Promotions\",message:\"Create a promotion and share the code with your leads and customers. The promotion can be redeemed on orders placed through your ezOrdering page.\",link:{label:\"Learn more\",href:\"#\",onClick:n},use:\"marketing\",onDismiss:()=>{}}),(0,e.jsxs)(D,{title:\"Promo Overview\",subtitle:\"Promos are self-funded and are available for use within both ezOrdering and Direct Entry.\",children:[(0,e.jsx)(c,{children:(0,e.jsxs)(v,{children:[(0,e.jsxs)(m,{layout:\"equal\",alignY:\"top\",children:[(0,e.jsx)(l,Object.assign({type:\"text\",label:\"Promo Name\",helperText:\"The name appears in ezManage and on customer receipts\"},i({name:\"promo-name\",validate:b}))),(0,e.jsx)(l,Object.assign({type:\"text\",label:\"Unique Promotion Code\",helperText:\"The your customers will use to redeem the promotion\",maxLength:15},i({name:\"unique-promo-code\",validate:b})))]}),(0,e.jsxs)(m,{layout:\"equal\",children:[(0,e.jsxs)(m,{layout:\"equal\",alignY:\"bottom\",children:[(0,e.jsx)(l,Object.assign({type:\"text\",label:\"Promotion Value\",placeholder:\"0\"},i({name:\"promo-value\",validate:S(b,w,E)}))),(0,e.jsx)(M,{name:\"promo-value-unit\",label:\"Promotion value: unit\",labelPosition:\"hidden\",options:[{label:\"%\",value:\"percentage\"},{label:\"$\",value:\"dollar\"}],active:\"percentage\"})]}),(0,e.jsx)(l,Object.assign({type:\"text\",label:\"Minimum Order Value (optional)\",placeholder:\"$\"},i({name:\"min-order-value\",validate:S(w,E)})))]})]})}),(0,e.jsx)(c,{title:\"Promo Schedule\",subtitle:\"Promotions become active upon creation. Best practice for distribution and tracking is 12 weeks or less.\",children:(0,e.jsx)(v,{children:(0,e.jsxs)(m,{layout:\"equal\",children:[(0,e.jsx)(l,Object.assign({type:\"date\",label:\"End Date\",placeholder:\"Choose\",style:{width:\"100%\"}},i({name:\"end-date\",validate:b}))),(0,e.jsx)(l,Object.assign({type:\"radio\",bordered:!0,label:\"Eligible Days of the Week\",options:[{label:\"Weekdays only\",value:\"weekdays\"},{label:\"All days of the week\",value:\"all\"}]},i({name:\"eligible-days\",type:\"radio\"})))]})})}),(0,e.jsx)(c,{title:\"Customer Details\",children:(0,e.jsx)(l,Object.assign({type:\"radio\",bordered:!0,label:\"Redemptions per Customer\",options:[{label:\"One per customer\",value:\"once\"},{label:\"Unlimited\",value:\"unlimited\"}]},i({name:\"redemptions\",type:\"radio\"})))}),(0,e.jsx)(c,{title:\"Store Details\",children:(0,e.jsx)(l,Object.assign({type:\"radio\",bordered:!0,label:\"Participating Stores\",options:[{label:\"All stores\",value:\"all\"},{label:\"Specific stores\",value:\"specific\"}]},i({name:\"participating-stores\",type:\"radio\"})))}),(0,e.jsx)(c,{children:(0,e.jsx)(j,{acknowledgement:!0,label:\"I agree to fund this promotion\",terms:\"I understand that the value of the promotion will be removed from my payment runs from ezCater wherever the promotion has been applied. I am aware that I am responsible for funding and marketing promotion, and that I can cancel this promotion at any time. I understand that this promotion cannot be redeemed by customers on ezCater Marketplace.\"})}),(0,e.jsx)(c,{children:(0,e.jsxs)(m,{layout:\"basic\",children:[(0,e.jsx)(y,{use:\"primary\",onClick:()=>{W(!0),alert(JSON.stringify(N,null,2))},children:\" Finalize Promotion\"}),(0,e.jsx)(y,{use:\"secondary\",onClick:()=>window.location.reload(),children:\" Cancel\"})]})})]})]})]})})}})}),`\n`,(0,e.jsx)(t.hr,{}),`\n`,(0,e.jsx)(t.h2,{id:\"related-components\",children:\"Related components\"}),`\n`,(0,e.jsxs)(t.ul,{children:[`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-app-layout\",children:\"High level application layout\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-navigation\",children:\"Navigation\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-page-header\",children:\"Page header\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-page\",children:\"Page\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-banner\",children:\"Marketing banner\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-card\",children:\"Card\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-card#card-with-sections\",children:\"Card sections\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-layout\",children:\"Small-scale layout\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-field\",children:\"Input fields\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-field#bordered-multiple-choice-input\",children:\"Bordered multiple choice input\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-segmented-control\",children:\"Segmented control\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-checkbox#acknowledgement-checkbox\",children:\"Acknowledgement checkbox\"})}),`\n`,(0,e.jsx)(t.li,{children:(0,e.jsx)(t.a,{href:\"/components/ez-button\",children:\"Button\"})}),`\n`]})]});return z?(0,e.jsx)(z,Object.assign({},a,{children:k})):k}var ne=oe;return le;})();\n;return Component.default;"},"__N_SSG":true}