{"version":3,"sources":["webpack:///./src/components/Preview.js"],"names":["opts","objectAssign","transforms","dangerousForOf","dangerousTaggedTemplateString","poly","assign","target","_varArgs","TypeError","to","Object","index","arguments","length","nextSource","nextKey","prototype","hasOwnProperty","call","ErrorBoundary","state","hasError","getDerivedStateFromError","render","this","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","props","children","React","Component","Eval","_ref","_ref$code","code","_ref$scope","scope","codeTrimmed","trim","replace","result","scopeKeys","keys","scopeValues","map","key","_babel_runtime_helpers_construct__WEBPACK_IMPORTED_MODULE_2___default","Function","concat","apply","evalCode","buble","Container","styled","__webpack_exports__","_ref2"],"mappings":"iPAIMA,EAAO,CACXC,aAAc,eACdC,WAAY,CACVC,gBAAgB,EAChBC,+BAA+B,IAI7BC,EAAO,CACXC,OAAQ,SAAgBC,EAAQC,GAE9B,GAAID,QACF,MAAM,IAAIE,UAAU,8CAKtB,IAFA,IAAIC,EAAKC,OAAOJ,GAEPK,EAAQ,EAAGA,EAAQC,UAAUC,OAAQF,IAAS,CACrD,IAAIG,EAAaF,UAAUD,GAE3B,GAAIG,QACF,IAAK,IAAIC,KAAWD,EACdJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAYC,KACnDN,EAAGM,GAAWD,EAAWC,IAKjC,OAAON,IAWLU,sJACJC,MAAQ,CAACC,UAAU,uBAEZC,yBAAP,WACE,MAAO,CAACD,UAAU,gBAGpBE,OAAA,WACE,OAAIC,KAAKJ,MAAMC,SACNI,EAAAC,EAAAC,cAAA,mCAGFH,KAAKI,MAAMC,aAZMC,IAAMC,WAgBrBC,EAAO,SAAAC,GAA6B,IAAAC,EAAAD,EAA3BE,YAA2B,IAAAD,EAApB,GAAoBA,EAAAE,EAAAH,EAAhBI,aAAgB,IAAAD,EAAR,GAAQA,EAEzCE,EAAcH,EAAKI,OAAOC,QAAQ,KAAM,IAExCC,EA3BS,SAACN,EAAME,GACtB,IAAMK,EAAYhC,OAAOiC,KAAKN,GACxBO,EAAcF,EAAUG,IAAI,SAAAC,GAAG,OAAIT,EAAMS,KAE/C,OADYC,IAAIC,SAAP,CAAgB,QAAS,SAAzBC,OAAqCP,EAArC,CAAgDP,KAC/Ce,WAAH,GAAI9C,EAAM0B,KAAVmB,OAAoBL,IAuBZO,CADKC,YAAA,WAA2Bd,EAA3B,IAA2CvC,GAAMoC,KAAKI,OACrCF,GACrC,MAAyB,mBAAXI,EAAwBX,IAAMH,cAAcc,EAAQ,MAAQA,GAGtEY,EAAYC,YAAH,OAAAhD,OAAA,YAAGgD,CAAH,kFAUAC,EAAA,iBAAAC,GAAmB,IAAjBrB,EAAiBqB,EAAjBrB,KAAME,EAAWmB,EAAXnB,MACrB,OACEZ,EAAAC,EAAAC,cAAC0B,EAAD,KACE5B,EAAAC,EAAAC,cAACR,EAAD,KACEM,EAAAC,EAAAC,cAACK,EAAD,CAAMG,KAAMA,EAAME,MAAOA,KAG3BZ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YAAOQ","file":"16-397e0d5e25b80d32fbcf.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport * as buble from 'buble/dist/buble-browser-deps.umd.js';\n\nconst opts = {\n  objectAssign: '_poly.assign',\n  transforms: {\n    dangerousForOf: true,\n    dangerousTaggedTemplateString: true,\n  },\n};\n\nconst poly = {\n  assign: function assign(target, _varArgs) {\n    'use strict';\n    if (target === null || target === undefined) {\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    var to = Object(target);\n\n    for (var index = 1; index < arguments.length; index++) {\n      var nextSource = arguments[index];\n\n      if (nextSource !== null && nextSource !== undefined) {\n        for (var nextKey in nextSource) {\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n    }\n    return to;\n  },\n};\n\nconst evalCode = (code, scope) => {\n  const scopeKeys = Object.keys(scope);\n  const scopeValues = scopeKeys.map(key => scope[key]);\n  const res = new Function('_poly', 'React', ...scopeKeys, code);\n  return res(poly, React, ...scopeValues);\n};\n\nclass ErrorBoundary extends React.Component {\n  state = {hasError: false};\n\n  static getDerivedStateFromError() {\n    return {hasError: true};\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport const Eval = ({code = '', scope = {}}) => {\n  // NOTE: Remove trailing semicolon to get an actual expression.\n  const codeTrimmed = code.trim().replace(/;$/, '');\n  const transformed = buble.transform(`return (${codeTrimmed})`, opts).code.trim();\n  const result = evalCode(transformed, scope);\n  return typeof result === 'function' ? React.createElement(result, null) : result;\n};\n\nconst Container = styled.div`\n  border: 1px solid #ced4d9;\n  padding: 20px;\n\n  > * + * {\n    margin-top: 1em;\n    margin-bottom: 0;\n  }\n`;\n\nexport default ({code, scope}) => {\n  return (\n    <Container>\n      <ErrorBoundary>\n        <Eval code={code} scope={scope} />\n      </ErrorBoundary>\n\n      <pre>\n        <code>{code}</code>\n      </pre>\n    </Container>\n  );\n};\n"],"sourceRoot":""}